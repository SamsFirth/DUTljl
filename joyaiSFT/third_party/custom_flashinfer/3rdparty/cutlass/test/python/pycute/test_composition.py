"""
Unit tests for pycute.composition
"""
import logging
import unittest
from pycute import *
_LOGGER = logging.getLogger(__name__)

class TestComposition(unittest.TestCase):

    def helper_test_composition(self, layoutA, layoutB):
        layoutR = composition(layoutA, layoutB)
        _LOGGER.debug(f'{layoutA} o {layoutB}  =>  {layoutR}')
        for i in range(size(layoutR)):
            self.assertEqual(layoutR(i), layoutA(layoutB(i)))

    def test_composition(self):
        layoutA = Layout(1, 0)
        layoutB = Layout(1, 0)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(1, 0)
        layoutB = Layout(1, 1)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(1, 1)
        layoutB = Layout(1, 0)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(1, 1)
        layoutB = Layout(1, 1)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(4)
        layoutB = Layout(4)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(4, 2)
        layoutB = Layout(4)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(4)
        layoutB = Layout(4, 2)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(4, 0)
        layoutB = Layout(4)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(4)
        layoutB = Layout(4, 0)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(1, 0)
        layoutB = Layout(4)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(4)
        layoutB = Layout(1, 0)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(4)
        layoutB = Layout(2)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(4, 2)
        layoutB = Layout(2)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(4)
        layoutB = Layout(2, 2)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(4, 2)
        layoutB = Layout(2, 2)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(12)
        layoutB = Layout((4, 3))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(12, 2)
        layoutB = Layout((4, 3))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(12)
        layoutB = Layout((4, 3), (3, 1))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(12, 2)
        layoutB = Layout((4, 3), (3, 1))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(12)
        layoutB = Layout((2, 3), (2, 4))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((4, 3))
        layoutB = Layout((4, 3))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((4, 3))
        layoutB = Layout(12)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((4, 3))
        layoutB = Layout(6, 2)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((4, 3))
        layoutB = Layout((6, 2), (2, 1))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((4, 3), (3, 1))
        layoutB = Layout((4, 3))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((4, 3), (3, 1))
        layoutB = Layout(12)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((4, 3), (3, 1))
        layoutB = Layout(6, 2)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((4, 3), (3, 1))
        layoutB = Layout((6, 2), (2, 1))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((8, 8))
        layoutB = Layout(((2, 2, 2), (2, 2, 2)), ((1, 16, 4), (8, 2, 32)))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((8, 8), (8, 1))
        layoutB = Layout(((2, 2, 2), (2, 2, 2)), ((1, 16, 4), (8, 2, 32)))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout(((2, 2, 2), (2, 2, 2)), ((1, 16, 4), (8, 2, 32)))
        layoutB = Layout(8, 4)
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((4, 2), (1, 16))
        layoutB = Layout((4, 2), (2, 1))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((2, 2), (2, 1))
        layoutB = Layout((2, 2), (2, 1))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((4, 8, 2))
        layoutB = Layout((2, 2, 2), (2, 8, 1))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((4, 8, 2), (2, 8, 1))
        layoutB = Layout((2, 2, 2), (1, 8, 2))
        self.helper_test_composition(layoutA, layoutB)
        layoutA = Layout((4, 8, 2), (2, 8, 1))
        layoutB = Layout((4, 2, 2), (2, 8, 1))
        self.helper_test_composition(layoutA, layoutB)
if __name__ == '__main__':
    unittest.main()